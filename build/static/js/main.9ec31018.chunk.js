(this["webpackJsonpreact-blog"]=this["webpackJsonpreact-blog"]||[]).push([[0],{103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),r=a(41),s=a.n(r),i=a(2),l=a.n(i),o=a(6),u=a(3),j=a(5),d=a.n(j),b=a(7),p=(a(67),a(0));function h(){return Object(p.jsxs)("div",{className:"header",children:[Object(p.jsxs)("div",{className:"headerTitles",children:[Object(p.jsx)("span",{className:"headerTitleSm",children:"React & Node"}),Object(p.jsx)("span",{className:"headerTitleLg",children:"Blog"})]}),Object(p.jsx)("img",{className:"headerImg",alt:"",src:"../assets/paysage.jpg"})]})}var O=a(8);a(69);function f(e){return console.log(e),Object(p.jsxs)("div",{className:"post",children:[Object(p.jsx)("img",{className:"postImg",src:e.article.articlePicture?"http://localhost:8080/file/getById/"+e.article.articlePicture.id:"https://orgaphenix.com/wp-content/uploads/2020/01/secrets-photo-profil-linkedin.jpeg",alt:e.article.articlePicture&&e.article.articlePicture.name}),Object(p.jsxs)("div",{className:"postInfo",children:[Object(p.jsx)("div",{className:"postCats",children:Object(p.jsx)("span",{className:"postCat",children:e.article.categorie&&e.article.categorie.nom})}),e.article.auteur?Object(p.jsx)(O.b,{to:"/author/".concat(e.article.auteur.username,"/post/").concat(e.article.id),children:Object(p.jsx)("span",{className:"postTitle",children:e.article.titre})}):Object(p.jsx)(O.b,{to:"/author/".concat(e.userUrl,"/post/").concat(e.article.id),children:Object(p.jsx)("span",{className:"postTitle",children:e.article.titre})}),e.article.auteur&&Object(p.jsxs)("span",{className:"postAuteur",children:["Par: ",e.article.auteur.name]}),Object(p.jsx)("span",{className:"postDate",children:e.article.date.slice(0,-7)})]}),Object(p.jsx)("p",{className:"postDesc",children:e.article.contenu})]})}a(74);function m(e){return Object(p.jsx)("div",{className:"posts",children:e.listeArticles.length?e.listeArticles.map((function(t){return Object(p.jsx)(f,{article:t,userUrl:e.userUrl},t.id)})):Object(p.jsx)("span",{children:"Aucun article"})})}a(75);function x(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/categorie/getAll").then((function(e){n(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(p.jsxs)("div",{className:"sidebar",children:[Object(p.jsxs)("div",{className:"sidebarItem",children:[Object(p.jsx)("span",{className:"sidebarTitle",children:"ABOUT ME"}),Object(p.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Ullam, exercitationem."})]}),Object(p.jsxs)("div",{className:"sidebarItem",children:[Object(p.jsx)("span",{className:"sidebarTitle",children:"CATEGORIES"}),Object(p.jsx)("ul",{className:"sidebarList",children:a.map((function(e){return Object(p.jsx)("li",{className:"sidebarListItem",children:Object(p.jsx)("a",{href:"/?cat=".concat(e.nom),children:e.nom})},e.id)}))})]}),Object(p.jsxs)("div",{className:"sidebarItem",children:[Object(p.jsx)("span",{className:"sidebarTitle",children:"FOLLOW US"}),Object(p.jsxs)("div",{className:"sidebarSocial",children:[Object(p.jsx)("i",{className:"sidebarIcon fab fa-facebook-square"}),Object(p.jsx)("i",{className:"sidebarIcon fab fa-twitter-square"})]})]})]})}a(76);function g(e){for(var t=e.postPerPage,a=e.totalPosts,c=e.paginate,n=[],r=1;r<=Math.ceil(a/t);r++)n.push(r);return Object(p.jsx)("nav",{children:Object(p.jsx)("ul",{className:"pagination",children:n.map((function(e){return Object(p.jsx)("li",{className:"page-item",children:Object(p.jsx)("a",{href:"#!",className:"page-link",onClick:function(){return c(e)},children:e})},e)}))})})}function N(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(1),s=Object(u.a)(r,2),i=s[0],j=s[1],O=Object(c.useState)(9),f=Object(u.a)(O,1)[0],N=Object(b.f)().search.replace("?","");Object(c.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N.includes("cat=")){e.next=5;break}return e.next=3,d.a.get("/article/get/allByCategorie/"+N.replace("cat=","")).then((function(e){n(e.data)}));case 3:e.next=12;break;case 5:if(!N){e.next=10;break}return e.next=8,d.a.get("/api/user/get/"+N).then((function(e){n(e.data.articles)}));case 8:e.next=12;break;case 10:return e.next=12,d.a.get("/article/get/all").then((function(e){n(e.data)}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var v=i*f,w=v-f,y=a.slice(w,v),k=function(e){return j(e)};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(h,{}),Object(p.jsxs)("div",{className:"home",children:[Object(p.jsxs)("article",{className:"paginate-list",children:[Object(p.jsx)(g,{className:"pagination",postPerPage:f,totalPosts:a.length,paginate:k}),a?Object(p.jsx)(m,{listeArticles:y,userUrl:N}):Object(p.jsx)("p",{children:"Aucun article"}),Object(p.jsx)(g,{className:"pagination",postPerPage:f,totalPosts:a.length,paginate:k})]}),Object(p.jsx)(x,{})]})]})}a(77);var v=function(e,t){switch(t.type){case"LOGIN_START":return{username:null,token:null,role:null,isFetching:!0,error:!1};case"LOGIN_SUCESS":return{username:t.payload.headers["access-control-allow-credentials"],token:t.payload.headers.authorization,role:t.payload.headers.allow,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{username:null,token:null,role:null,isFetching:!1,error:!0};case"LOGOUT":return{username:null,token:null,role:null,isFetching:!1,error:!1};default:return e}},w={username:localStorage.getItem("username")||null,token:"null"!==localStorage.getItem("token")?localStorage.getItem("token"):null,role:localStorage.getItem("role")||null,isFetching:!1,error:!1},y=Object(c.createContext)(w),k=function(e){var t=e.children,a=Object(c.useReducer)(v,w),n=Object(u.a)(a,2),r=n[0],s=n[1];return Object(c.useEffect)((function(){localStorage.setItem("token",r.token),localStorage.setItem("role",r.role),localStorage.setItem("username",r.username)}),[r.username,r.token,r.role]),Object(p.jsx)(y.Provider,{value:{username:r.username,token:r.token,role:r.role,isFetching:r.isFetching,error:r.error,dispatch:s},children:t})},I=a(23),S=a.n(I),C=function(e){return S.a.AES.encrypt(JSON.stringify(e),"[KXG/')3#>XY1D&LVQ''cYJ+A1foZ'8x)O8[[fvg[QSG`<w!~rDZB,T.5@3JU*P").toString()},P=function(e){return JSON.parse(S.a.AES.decrypt(e,"[KXG/')3#>XY1D&LVQ''cYJ+A1foZ'8x)O8[[fvg[QSG`<w!~rDZB,T.5@3JU*P").toString(S.a.enc.Utf8))};function T(){var e=Object(c.useContext)(y),t=e.token,a=e.dispatch,n=Object(c.useState)([]),r=Object(u.a)(n,2),s=r[0],i=r[1];return Object(c.useEffect)((function(){t&&function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/user/myCredentials",{headers:{Authorization:P(t)}}).then((function(e){e.data.profilePicture&&i(e.data.profilePicture.id)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),Object(p.jsxs)("div",{className:"top",children:[Object(p.jsxs)("div",{className:"topLeft",children:[Object(p.jsx)("i",{className:"topIcon fab fa-facebook-square"}),Object(p.jsx)("i",{className:"topIcon fab fa-twitter-square"})]}),Object(p.jsx)("div",{className:"topCenter",children:Object(p.jsxs)("ul",{className:"topList",children:[Object(p.jsx)("li",{className:"topListItem",children:Object(p.jsx)(O.b,{to:"/",className:"link",onClick:function(){window.history.replaceState(null,"","/"),window.location.reload()},children:"HOME"})}),Object(p.jsx)("li",{className:"topListItem",children:Object(p.jsx)(O.b,{to:"/write",className:"link",children:t&&"WRITE"})}),Object(p.jsx)("li",{className:"topListItem",children:Object(p.jsx)(O.b,{to:"/",className:"link",children:"ABOUT"})}),Object(p.jsx)("li",{className:"topListItem",children:Object(p.jsx)(O.b,{to:"/",className:"link",children:"CONTACT"})})]})}),Object(p.jsxs)("div",{className:"topRight",children:[null!=t?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("img",{className:"topImg",src:0==!s.length?"http://localhost:8080/file/getById/"+s:"/assets/profil.png",alt:""}),Object(p.jsx)(O.b,{to:"/profil",className:"linkLogout",children:"PROFIL"}),Object(p.jsx)(O.b,{to:"/",className:"linkLogout",onClick:function(){a({type:"LOGOUT"})},children:"LOGOUT"})]}):Object(p.jsxs)("ul",{className:"topList",children:[Object(p.jsx)("li",{className:"topListItem",children:Object(p.jsx)(O.b,{className:"link",to:"/login",children:"LOGIN"})}),Object(p.jsx)("li",{className:"topListItem",children:Object(p.jsx)(O.b,{className:"link",to:"/register",children:"REGISTER"})})]}),Object(p.jsx)("i",{className:"topSearchIcon fas fa-search"})]})]})}a(103);function L(){var e=Object(c.useContext)(y),t=e.username,a=e.token,n=Object(c.useState)(null),r=Object(u.a)(n,2),s=r[0],i=r[1],j=Object(c.useState)(null),b=Object(u.a)(j,2),h=b[0],O=b[1],f=Object(c.useState)(null),m=Object(u.a)(f,2),x=m[0],g=m[1],N=Object(c.useState)([]),v=Object(u.a)(N,2),w=v[0],k=v[1],I=Object(c.useState)([]),S=Object(u.a)(I,2),C=S[0],T=S[1],L=Object(c.useState)(null),A=Object(u.a)(L,2),E=A[0],F=A[1],U=Object(c.useState)(null),R=Object(u.a)(U,2),z=R[0],G=R[1],B=Object(c.useState)(null),D=Object(u.a)(B,2),q=D[0],V=D[1],_=Object(c.useState)(!1),J=Object(u.a)(_,2),M=(J[0],J[1]),Q=new FormData,W=Object(c.useState)(!1),X=Object(u.a)(W,2),Y=(X[0],X[1],function(){var e=Object(o.a)(l.a.mark((function e(c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),s&&h&&C.length){e.next=7;break}!s&&V("titre"),!h&&V("contenu"),!C.length&&V("categorie"),e.next=14;break;case 7:return Q.append("username",t),Q.append("titre",s),Q.append("contenu",h),Q.append("categorie",C),E&&Q.append("picture",E),e.next=14,d.a.post("/article/new/",Q,{headers:{Authorization:P(a),"Content-Type":"multipart/form-data",Boundary:"0340540654654034134"}}).then((function(e){g(e.data.id)}));case 14:case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(c.useEffect)((function(){x&&window.location.replace("/author/"+t+"/post/"+x)}),[x]),Object(c.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/categorie/getAll").then((function(e){k(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.useEffect)((function(){q&&M(!0),setTimeout((function(){M(!1)}),3e3)}),[q]),Object(c.useEffect)((function(){E&&G(URL.createObjectURL(E))}),[E]),Object(p.jsxs)("div",{className:"write",children:[Object(p.jsx)("img",{className:"writeImg",src:z||"https://webcolours.ca/wp-content/uploads/2020/10/webcolours-unknown.png",alt:""}),Object(p.jsxs)("form",{className:"writeForm",onSubmit:Y,children:[Object(p.jsxs)("div",{className:"writeFormGroup",children:[Object(p.jsx)("label",{htmlFor:"fileInput",children:Object(p.jsx)("i",{className:"writeIcon fas fa-plus"})}),Object(p.jsx)("input",{type:"file",id:"fileInput",onChange:function(e){return F(e.target.files[0])},style:{display:"none"}}),Object(p.jsx)("input",{type:"text",placeholder:"Titre article",className:"writeInput",autoFocus:!0,onChange:function(e){return i(e.target.value)},required:!0}),Object(p.jsx)("label",{className:"categorie-label",htmlFor:"cat-select",children:"Cat\xe9gorie"}),Object(p.jsxs)("select",{className:"categorie-form",id:"cat-select",onChange:function(e){return T(e.target.value)},required:!0,children:[Object(p.jsx)("option",{value:"",children:"--Choisissez une cat\xe9gorie--"}),w.map((function(e){return Object(p.jsx)("option",{value:e.nom,children:e.nom},e.id)}))]})]}),Object(p.jsx)("div",{className:"writeFormGroup",children:Object(p.jsx)("textarea",{placeholder:"Ecrivez texte...",type:"text",className:"writeInput writeText",onChange:function(e){return O(e.target.value)},required:!0})}),Object(p.jsx)("button",{className:"writeSubmit",type:"submit",children:"Publier"})]})]})}a(104);function A(){return Object(p.jsxs)("div",{className:"settings",children:[Object(p.jsxs)("div",{className:"settingsWrapper",children:[Object(p.jsxs)("div",{className:"settingsTitle",children:[Object(p.jsx)("span",{className:"settingsUpdateTitle",children:"Mettre \xe0 jour compte"}),Object(p.jsx)("span",{className:"settingsDeleteTitle",children:"Supprimer compte"})]}),Object(p.jsxs)("form",{className:"settingsForm",children:[Object(p.jsx)("label",{children:"Image profil"}),Object(p.jsxs)("div",{className:"settingsPP",children:[Object(p.jsx)("img",{src:"../../assets/profil.jpg",alt:""}),Object(p.jsx)("label",{htmlFor:"fileInput",children:Object(p.jsx)("i",{className:"settingsPPIcon far fa-user-circle"})}),Object(p.jsx)("input",{type:"file",id:"fileInput",style:{display:"none"}})]}),Object(p.jsx)("label",{children:"Nom utilisateur"}),Object(p.jsx)("input",{type:"text",placeholder:"Alex"}),Object(p.jsx)("label",{children:"Email"}),Object(p.jsx)("input",{type:"email",placeholder:"test@test.com"}),Object(p.jsx)("label",{children:"Mdp"}),Object(p.jsx)("input",{type:"password"}),Object(p.jsx)("button",{className:"settingsSubmit",children:"Update"})]})]}),Object(p.jsx)(x,{})]})}a(105);function E(){var e=Object(c.useRef)(),t=Object(c.useRef)(),a=Object(c.useContext)(y),n=a.dispatch,r=a.isFetching,s=function(){var a=Object(o.a)(l.a.mark((function a(c){var r;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c.preventDefault(),n({type:"LOGIN_START"}),a.prev=2,a.next=5,d.a.post("/login",{username:e.current.value,password:t.current.value});case 5:(r=a.sent).headers.authorization=C(r.headers.authorization),n({type:"LOGIN_SUCESS",payload:r}),window.history.replaceState(null,"","/"),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(2),n({type:"LOGIN_FAILURE"});case 14:case"end":return a.stop()}}),a,null,[[2,11]])})));return function(e){return a.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"login",children:[Object(p.jsx)("span",{className:"loginTitle",children:"Login"}),Object(p.jsxs)("form",{className:"loginForm",onSubmit:s,children:[Object(p.jsx)("label",{children:"Username"}),Object(p.jsx)("input",{type:"text",className:"loginInput",placeholder:"Entrez votre identifiant",ref:e}),Object(p.jsx)("label",{children:"Password"}),Object(p.jsx)("input",{type:"password",className:"loginInput",placeholder:"Entrez votre mdp",ref:t}),Object(p.jsx)("button",{className:"loginButton",type:"submit",disabled:r,children:"Login"})]}),Object(p.jsx)("button",{className:"loginRegisterButton",children:Object(p.jsx)(O.b,{className:"link",to:"/register",children:"Register"})})]})}a(106);function F(){var e=Object(c.useRef)(),t=Object(c.useRef)(),a=Object(c.useRef)(),n=Object(c.useState)(null),r=Object(u.a)(n,2),s=r[0],i=r[1],j=Object(c.useContext)(y),b=j.dispatch,h=(j.isFetching,function(){var c=Object(o.a)(l.a.mark((function c(n){return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n.preventDefault(),c.prev=1,c.next=4,d.a.post("/api/user/subscribe",{username:e.current.value,name:t.current.value,password:a.current.value}).then((function(e){return 201==e.status&&i(e.data.username)}));case 4:c.next=8;break;case 6:c.prev=6,c.t0=c.catch(1);case 8:case"end":return c.stop()}}),c,null,[[1,6]])})));return function(e){return c.apply(this,arguments)}}());return Object(c.useEffect)((function(){s&&function(){var t=Object(o.a)(l.a.mark((function t(){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b({type:"LOGIN_START"}),t.prev=1,t.next=4,d.a.post("/login",{username:e.current.value,password:a.current.value});case 4:(c=t.sent).headers.authorization=C(c.headers.authorization),b({type:"LOGIN_SUCESS",payload:c}),window.history.replaceState(null,"","/"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),b({type:"LOGIN_FAILURE"});case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(){return t.apply(this,arguments)}}()()}),[s]),Object(p.jsxs)("div",{className:"register",children:[Object(p.jsx)("span",{className:"registerTitle",children:"Register"}),Object(p.jsxs)("form",{className:"registerForm",onSubmit:h,children:[Object(p.jsx)("label",{children:"Email"}),Object(p.jsx)("input",{type:"text",className:"registerInput",placeholder:"Entrez votre email",ref:e,required:!0}),Object(p.jsx)("label",{children:"Pseudo"}),Object(p.jsx)("input",{type:"text",className:"registerInput",placeholder:"Entrez votre nom d'utilisateur",ref:t,required:!0}),Object(p.jsx)("label",{children:"Password"}),Object(p.jsx)("input",{type:"password",className:"registerInput",placeholder:"Entrez votre mdp",ref:a,required:!0}),Object(p.jsx)("button",{className:"registerButton",type:"submit",children:"Register"})]}),Object(p.jsx)("button",{className:"registerLoginButton",children:Object(p.jsx)(O.b,{className:"link",to:"/login",children:"Login"})})]})}a(107);function U(){var e=Object(b.f)().pathname.split("/")[4],t=Object(c.useContext)(y),a=t.token,n=t.username,r=Object(c.useState)(""),s=Object(u.a)(r,2),i=s[0],j=s[1],h=Object(c.useState)(!1),f=Object(u.a)(h,2),m=f[0],x=f[1],g=Object(c.useState)([]),N=Object(u.a)(g,2),v=N[0],w=N[1],k=Object(c.useState)([]),I=Object(u.a)(k,2),S=I[0],C=I[1],T=Object(c.useState)(""),L=Object(u.a)(T,2),A=L[0],E=L[1],F=Object(c.useState)(""),U=Object(u.a)(F,2),R=U[0],z=U[1];Object(c.useEffect)((function(){(function(){var t=Object(o.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("/article/get/"+e).then((function(e){j(e.data),C(e.data.categorie.nom),E(e.data.titre),z(e.data.contenu)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(c.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/categorie/getAll").then((function(e){w(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var G=function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.delete("/article/auteur/"+n+"/delete/"+i.id,{headers:{Authorization:P(a)}});case 2:window.location.replace("/");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(o.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c={id:i.id,titre:A,contenu:R},e.next=4,d.a.put("/article/auteur/"+n+"/modify?categorie="+S,c,{headers:{Authorization:P(a)}});case 4:window.location.replace("/author/"+n+"/post/"+i.id);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"singlePost",children:Object(p.jsxs)("div",{className:"singlePostWrapper",children:[Object(p.jsx)("img",{src:i.articlePicture?"http://localhost:8080/file/getById/"+i.articlePicture.id:"https://orgaphenix.com/wp-content/uploads/2020/01/secrets-photo-profil-linkedin.jpeg",alt:"",className:"singlePostImg"}),m?Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("form",{action:"",method:"post",className:"update-article",onSubmit:B,children:[Object(p.jsxs)("div",{className:"singlePostTitleInput",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{htmlFor:"titre",children:"Titre: "}),Object(p.jsx)("input",{defaultValue:i.titre,type:"text",name:"titre",onChange:function(e){return E(e.target.value)},required:!0})]}),Object(p.jsx)("i",{className:"far fa-times-circle",onClick:function(){return x(!1)}})]}),Object(p.jsx)("label",{htmlFor:"cat-select",children:"Cat\xe9gorie:"}),Object(p.jsxs)("select",{className:"singlePostDate",id:"cat-select",name:"cat-select",defaultValue:i.categorie&&i.categorie.nom,onChange:function(e){return C(e.target.value)},children:[Object(p.jsx)("option",{defaultValue:i.categorie&&i.categorie.nom,children:i.categorie&&i.categorie.nom}),v.map((function(e){return Object(p.jsx)("option",{defaultValue:e.nom,children:e.nom})}))]}),Object(p.jsxs)("div",{className:"form-example",children:[Object(p.jsx)("label",{htmlFor:"email",children:"Contenu:"}),Object(p.jsx)("input",{defaultValue:i.contenu,type:"text",name:"contenu",className:"contenu",onChange:function(e){return z(e.target.value)},required:!0})]}),Object(p.jsx)("div",{className:"form-example",children:Object(p.jsx)("input",{type:"submit",defaultValue:"Modifier"})})]})}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("h1",{className:"singlePostTitle",children:[i.titre,i.auteur?i.auteur.username===n&&Object(p.jsxs)("div",{className:"singlePostEdit",children:[Object(p.jsx)("i",{className:"singlePostIcon far fa-edit",onClick:function(){return x(!0)}}),Object(p.jsx)("i",{className:"singlePostIcon far fa-trash-alt",onClick:G})]}):void 0]}),Object(p.jsx)("span",{className:"singlePostDate",children:i.categorie&&i.categorie.nom}),Object(p.jsxs)("div",{className:"singlePostInfo",children:[Object(p.jsx)("span",{className:"singlePostAutor",children:i.auteur?Object(p.jsx)(O.b,{className:"link",to:"/?".concat(i.auteur.username),children:Object(p.jsx)("span",{className:"postTitle",children:i.auteur.username})}):void 0}),Object(p.jsx)("span",{className:"singlePostDate",children:i.date})]}),Object(p.jsx)("p",{className:"singlePostDesc",children:i.contenu})]})]})})}a(108);function R(){var e=Object(c.useContext)(y),t=e.token,a=e.username,n=e.dispatch,r=Object(c.useState)([]),s=Object(u.a)(r,2),i=s[0],j=s[1],b=Object(c.useState)(null),h=Object(u.a)(b,2),O=h[0],f=h[1],m=Object(c.useState)(!1),x=Object(u.a)(m,2),g=x[0],N=x[1],v=Object(c.useState)(!1),w=Object(u.a)(v,2),k=w[0],I=w[1],S=Object(c.useState)(""),C=Object(u.a)(S,2),T=C[0],L=C[1],A=Object(c.useState)(""),E=Object(u.a)(A,2),F=(E[0],E[1],new FormData);Object(c.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/user/myCredentials",{headers:{Authorization:P(t)}}).then((function(e){j(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.useEffect)((function(){F.append("file",O),O&&function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/file/user/"+a+"/upload",F,{headers:{Authorization:P(t),"Content-Type":"multipart/form-data",Boundary:"03405406fdsdfsdfsdfs54654034134"}});case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),f(null),F.delete("file")}),[O]);var U=function(){var e=Object(o.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F.append("file",a.target.files[0]),e.next=3,d.a.post("/file/article/"+a.target.id+"/upload",F,{headers:{Authorization:P(t),"Content-Type":"multipart/form-data",Boundary:"03405406fdsdfsdfsdfs54654034134"}});case 3:window.location.reload();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(o.a)(l.a.mark((function e(c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.delete("/article/auteur/"+a+"/delete/"+c.target.id,{headers:{Authorization:P(t)}});case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(o.a)(l.a.mark((function e(c){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),n={name:T},e.next=4,d.a.put("/api/user/"+a,n,{headers:{Authorization:P(t)}}).then((function(e){j(e.data)})).then(N(!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.delete("/api/user/delete",{headers:{Authorization:P(t)}});case 2:n({type:"LOGOUT"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"profil-wrapper",children:[Object(p.jsxs)("div",{className:"title",children:[Object(p.jsx)("div",{className:"credentials",children:g?Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"input-group mb-3 w-75",children:[Object(p.jsx)("label",{className:"input-group-text",htmlFor:"name",id:"basic-addon1",children:"Nom"}),Object(p.jsx)("input",{type:"text",name:"nom",className:"form-control",onChange:function(e){return L(e.target.value)},required:!0}),Object(p.jsx)("i",{class:"far fa-check-square",onClick:z}),Object(p.jsx)("i",{className:"far fa-times-circle",onClick:function(){return N(!1)}})]})}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("h1",{children:["Email/Username:",Object(p.jsx)("p",{children:i.username})]}),Object(p.jsx)("br",{}),Object(p.jsxs)("h1",{children:["Pseudonyme:",Object(p.jsx)("i",{className:"singlePostIcon far fa-edit",onClick:function(){return N(!0)}}),Object(p.jsx)("p",{children:i.name})]})]})}),Object(p.jsx)("img",{className:"pic-profil",src:i.profilePicture?"http://localhost:8080/file/getById/"+i.profilePicture.id:"/assets/profil.png",alt:""}),Object(p.jsx)("label",{htmlFor:"fileInput",children:Object(p.jsx)("i",{className:"writeIcon fas fa-plus"})}),Object(p.jsx)("input",{type:"file",id:"fileInput",style:{display:"none"},onChange:function(e){return f(e.target.files[0])}}),Object(p.jsx)("div",{className:"deleteUser",children:k?Object(p.jsxs)("div",{className:"deletePopup",children:[Object(p.jsx)("p",{className:"popupTitle",children:"Confirmer?"}),Object(p.jsxs)("div",{className:"deleteButtons",children:[Object(p.jsx)("button",{type:"button",class:"btn btn-danger btn-sm",onClick:G,children:"Supprimer"}),Object(p.jsx)("button",{type:"button",class:"btn btn-secondary",onClick:function(){return I(!1)},children:"Annuler"})]})]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("p",{children:"Supprimer Compte"}),Object(p.jsx)("i",{class:"fas fa-user-slash",onClick:function(){return I(!0)}})]})})]}),Object(p.jsxs)("table",{className:"table",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"col",children:"Titre"}),Object(p.jsx)("th",{scope:"col",children:"Date"}),Object(p.jsx)("th",{scope:"col",children:"Cat\xe9gorie"}),Object(p.jsx)("th",{scope:"col",children:"Contenu"}),Object(p.jsx)("th",{scope:"col",children:"Image"}),Object(p.jsx)("th",{scope:"col",children:"Actions"})]})}),Object(p.jsx)("tbody",{children:i.articles&&i.articles.length?i.articles.map((function(e){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"row",children:e.titre}),Object(p.jsx)("td",{children:e.date}),Object(p.jsx)("td",{children:e.categorie.nom}),Object(p.jsx)("td",{children:Object(p.jsx)("p",{className:"contenu overflow-auto",children:e.contenu})}),Object(p.jsxs)("td",{className:"articlePictureList",children:[Object(p.jsx)("img",{src:e.articlePicture?"http://localhost:8080/file/getById/"+e.articlePicture.id:"https://orgaphenix.com/wp-content/uploads/2020/01/secrets-photo-profil-linkedin.jpeg",alt:"",className:"singlePostImgProfil"}),Object(p.jsx)("label",{htmlFor:e.id,children:Object(p.jsx)("i",{className:"writeIcon fas fa-plus fileInputArticle"})}),Object(p.jsx)("input",{type:"file",id:e.id,style:{display:"none"},onChange:function(e){return U(e)}})]}),Object(p.jsxs)("td",{children:[" ",Object(p.jsx)("i",{className:"singlePostIcon far fa-edit",id:e.id,onClick:function(e){return window.location.replace("/edit/"+a+"/post/"+e.target.id)}}),Object(p.jsx)("i",{className:"singlePostIcon far fa-trash-alt",id:e.id,onClick:function(e){return R(e)}}),Object(p.jsx)("i",{className:"far fa-eye",id:e.id,onClick:function(e){return window.location.replace("/author/"+a+"/post/"+e.target.id)}})]})]},e.id)})):Object(p.jsx)("span",{children:"Aucun article"})})]})]})}function z(){var e=Object(b.f)().pathname.split("/")[4],t=Object(c.useContext)(y),a=t.token,n=t.username,r=Object(c.useState)([]),s=Object(u.a)(r,2),i=s[0],j=s[1],h=Object(c.useState)(""),O=Object(u.a)(h,2),f=O[0],m=O[1],x=Object(c.useState)(""),g=Object(u.a)(x,2),N=g[0],v=g[1],w=Object(c.useState)(""),k=Object(u.a)(w,2),I=k[0],S=k[1],C=function(){var t=Object(o.a)(l.a.mark((function t(c){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),r={id:e,titre:f,contenu:N},t.next=4,d.a.put("/article/auteur/"+n+"/modify?categorie="+I,r,{headers:{Authorization:P(a)}});case 4:window.location.replace("/profil/");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){(function(){var t=Object(o.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("/article/get/"+e,{headers:{Authorization:P(a)}}).then((function(e){S(e.data.categorie.nom),m(e.data.titre),v(e.data.contenu)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(c.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/categorie/getAll").then((function(e){j(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(p.jsx)("div",{children:Object(p.jsxs)("form",{action:"",method:"get",className:"form-example",onSubmit:C,children:[Object(p.jsx)("h1",{className:"edit-title",children:"Edition Article"}),Object(p.jsxs)("div",{className:"input-group mb-3 w-50",children:[Object(p.jsx)("label",{className:"input-group-text",htmlFor:"name",id:"basic-addon1",children:"Titre"}),Object(p.jsx)("input",{defaultValue:f,type:"text",name:"titre",className:"form-control",onChange:function(e){return m(e.target.value)},required:!0})]}),Object(p.jsxs)("div",{className:"input-group mb-3",children:[Object(p.jsx)("label",{className:"input-group-text",htmlFor:"cat-select",id:"basic-addon1",children:"Cat\xe9gorie"}),Object(p.jsxs)("select",{className:"categorie-form",id:"cat-select",defaultValue:I,onChange:function(e){return S(e.target.value)},children:[Object(p.jsx)("option",{children:I}),i.map((function(e){return Object(p.jsx)("option",{defaultValue:e.nom,children:e.nom},e.id)}))]})]}),Object(p.jsxs)("div",{className:"input-group w-50",children:[Object(p.jsx)("label",{htmlFor:"email",className:"input-group-text",children:"Contenu: "}),Object(p.jsx)("textarea",{defaultValue:N,type:"text",name:"contenu",className:"form-control",onChange:function(e){return v(e.target.value)},required:!0})]}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{className:"btn btn-info",type:"submit",defaultValue:"Modifier"})})]})})}var G=function(){var e=Object(c.useContext)(y).token;return Object(p.jsxs)(O.a,{children:[Object(p.jsx)(T,{}),Object(p.jsxs)(b.c,{children:[Object(p.jsx)(b.a,{exact:!0,path:"/",children:Object(p.jsx)(N,{})}),Object(p.jsx)(b.a,{path:"/register",children:e?Object(p.jsx)(N,{}):Object(p.jsx)(F,{})}),Object(p.jsx)(b.a,{path:"/login",children:e?Object(p.jsx)(N,{}):Object(p.jsx)(E,{})}),Object(p.jsx)(b.a,{path:"/write",children:e?Object(p.jsx)(L,{}):Object(p.jsx)(F,{})}),Object(p.jsx)(b.a,{path:"/settings",children:e?Object(p.jsx)(A,{}):Object(p.jsx)(F,{})}),Object(p.jsx)(b.a,{path:"/profil",children:e?Object(p.jsx)(R,{}):Object(p.jsx)(E,{})}),Object(p.jsx)(b.a,{path:"/edit/:username/post/:postId",children:e?Object(p.jsx)(z,{}):Object(p.jsx)(E,{})}),Object(p.jsx)(b.a,{path:"/author/:username/post/:postId",children:Object(p.jsx)(U,{})})]})]})};s.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(k,{children:Object(p.jsx)(G,{})})}),document.getElementById("root"))},67:function(e,t,a){},69:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t){}},[[109,1,2]]]);
//# sourceMappingURL=main.9ec31018.chunk.js.map